<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[A Tech Blog]]></title><description><![CDATA[Generally creative person.]]></description><link>https://blog.aidanbreen.com/</link><generator>RSS for Node</generator><lastBuildDate>Mon, 11 Feb 2019 09:43:54 GMT</lastBuildDate><item><title><![CDATA[Vivisection of OpenTable widget.]]></title><description><![CDATA[You may be familiar with OpenTable, a service built around restaurant bookings. One of their main features is an embeddable widget that…]]></description><link>https://blog.aidanbreen.com//vivisection-of-opentable-widget/</link><guid isPermaLink="false">https://blog.aidanbreen.com//vivisection-of-opentable-widget/</guid><pubDate>Wed, 06 Feb 2019 12:46:37 GMT</pubDate><content:encoded>&lt;p&gt;You may be familiar with OpenTable, a service built around restaurant bookings. One of their main features is an embeddable widget that restaurants can insert in their website to let patrons reserve a table. Here’s what it looks like in the wild:&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/d4493fc8415fa3782f9b4f6b862c9631/3a642/screenshot1.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 54.60937500000001%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABZklEQVQoz31Sy3KCQBDkw3NKTrnllD/yomKS0lhRPCAaKQkKIvIS7WxPsWQllWxV184MO73TvViXywXj8Ri9Xg95noOLtev12oJ5XdctzuezEddswGqXwXFdWEmSYDKZCIIg+JPQBInMXB1CmFZw15+wyrIEURQFsiwTAnN18+63qqqknyva72FRpgalLJdLzOdzLBYLuEoC8+l0itls1uaMHceBv9lIHwch8Xa7hcXJNCGleJ6H4XAI27bFW+YkHwwGUnsZjWTv9/tyse7nMLRMJtTFOI5BT7UEesOD4lMj0TSAVVOdTKgJC7UHquD7PtI0xfF4RBTF8u10Oil/IvCag/0K7+4B6/tHbJ6eUSipedYhzBvCw2qNXRiKH9obPb3Eqp59hTi8TZCM35F83Er+IeSU3FUTG9upm8M3MV9VTSpQFvySXJZF29CF6e9NzEs1mlr7ynwIemT+PlqiSfLfpeYrfwMsc0teW41GqwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;OpenTable widget on http://thehillpub.ie/&quot;
        title=&quot;&quot;
        src=&quot;/static/d4493fc8415fa3782f9b4f6b862c9631/40fad/screenshot1.png&quot;
        srcset=&quot;/static/d4493fc8415fa3782f9b4f6b862c9631/707e9/screenshot1.png 148w,
/static/d4493fc8415fa3782f9b4f6b862c9631/649e0/screenshot1.png 295w,
/static/d4493fc8415fa3782f9b4f6b862c9631/40fad/screenshot1.png 590w,
/static/d4493fc8415fa3782f9b4f6b862c9631/b3fef/screenshot1.png 885w,
/static/d4493fc8415fa3782f9b4f6b862c9631/301c0/screenshot1.png 1180w,
/static/d4493fc8415fa3782f9b4f6b862c9631/b5a53/screenshot1.png 1770w,
/static/d4493fc8415fa3782f9b4f6b862c9631/3a642/screenshot1.png 2560w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;This widget was generated by the OpenTable widget builder page like so:&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/3902295d05ad6ccc25b62c3abb8c1cd4/0dba9/screenshot2.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 50.47095761381476%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAABVElEQVQoz4WT3U7DMAyF9/5Pg4QQCAESL4DEI6xsS/PTNE6attsuDna6jA0EXJzadeovjp2uxnGE9x4hBEzTVJRSKrGcc3mXb+rapUr8eER4e0f3+ILc91hJ0DlXkud5Lh+J74yBP8VjjGWTH5L4MIB2CmHdYGS/AKU6SZoYOMvubL1YAJmtrBPRr4oMiswRVgGq7RZKqbJjlgoDwT48IT6/Im53IEmQRF6/0ilWoKwzULcttNbLjilipIju5g7m9h6Jj0NDKgl/VsngApz4sWkaNCyBGu5dygPS4YDIDY/s00Ul/wJH6REHZKoDH22/35dBkPS19u4fWNVS4ekKCESA4oslCkuPaBnYwFP9rjrtegvOPaw68DHl6sii1gattdgZB9N1cD0Pqg9sv+R5eDHQNbBe0KpaoWoNNgxtdMdQiw9tsW4tv7PaxVe2g7fu/GNI/ickM/scW/T2JgAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;screenshot2&quot;
        title=&quot;&quot;
        src=&quot;/static/3902295d05ad6ccc25b62c3abb8c1cd4/40fad/screenshot2.png&quot;
        srcset=&quot;/static/3902295d05ad6ccc25b62c3abb8c1cd4/707e9/screenshot2.png 148w,
/static/3902295d05ad6ccc25b62c3abb8c1cd4/649e0/screenshot2.png 295w,
/static/3902295d05ad6ccc25b62c3abb8c1cd4/40fad/screenshot2.png 590w,
/static/3902295d05ad6ccc25b62c3abb8c1cd4/b3fef/screenshot2.png 885w,
/static/3902295d05ad6ccc25b62c3abb8c1cd4/301c0/screenshot2.png 1180w,
/static/3902295d05ad6ccc25b62c3abb8c1cd4/b5a53/screenshot2.png 1770w,
/static/3902295d05ad6ccc25b62c3abb8c1cd4/0dba9/screenshot2.png 2548w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;Try it yourself at: &lt;a href=&quot;https://www.opentable.com/widget/reservation/preview?rid=412810&amp;#x26;language=en-US&amp;#x26;domainId=1&amp;#x26;countryCode=US&quot;&gt;opentable&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;As you can see, we can change a few settings and then just copy the code into our own website. Pretty handy, but how does it work?&lt;/p&gt;
&lt;h2&gt;The loading script&lt;/h2&gt;
&lt;p&gt;The script we copy is simply a &lt;code class=&quot;language-text&quot;&gt;&amp;lt;script/&amp;gt;&lt;/code&gt; tag, which is used to load javascript. We can simply copy the URL into a browser window to see the code that would be loaded:&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/c3011ff821afad0c9f36fe90d630fb75/53c0a/screenshot3.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 37.842064112587956%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABHElEQVQoz22R2Y6DMAxF8/8f2H2jhbCEHcTw0t7JySgVDxPpyHZirhfMMI6yRaGycqpcLZsXgaIsQxzhHVzTqK1rDd72Q6eyaeW6ObzVzslcr1clj4eyLAtYm339qqrkfBLUXiTGjRdzPsZvvT9No36WRRxzOByUJIkul4seXjhNUz2fzwA+wvGO99frpbZt1XWd+r7Xuq5f3u+3zPF41O120/l8DhZx7Pbufr8HKEq8LYSlY4pQwJAEp9NJjA/4UQgfS4zPRBQCvkOQbhFc/NiGJB53u53oFvb7ffiYERnVWhugI2CX7JTO5nn2O5yCBUPlv59hVfo/m+d5iLHbUYBOhmEIxD2Sgzgxwubz+Qj+O/FtC4uH7V3M5fwCo21Vfol5iZ8AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;Raw widget code&quot;
        title=&quot;&quot;
        src=&quot;/static/c3011ff821afad0c9f36fe90d630fb75/40fad/screenshot3.png&quot;
        srcset=&quot;/static/c3011ff821afad0c9f36fe90d630fb75/707e9/screenshot3.png 148w,
/static/c3011ff821afad0c9f36fe90d630fb75/649e0/screenshot3.png 295w,
/static/c3011ff821afad0c9f36fe90d630fb75/40fad/screenshot3.png 590w,
/static/c3011ff821afad0c9f36fe90d630fb75/b3fef/screenshot3.png 885w,
/static/c3011ff821afad0c9f36fe90d630fb75/301c0/screenshot3.png 1180w,
/static/c3011ff821afad0c9f36fe90d630fb75/b5a53/screenshot3.png 1770w,
/static/c3011ff821afad0c9f36fe90d630fb75/53c0a/screenshot3.png 2558w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;Yikes. It’s obviously been minified (as you would expect) but hope is not lost. Let’s copy this into a text editor and run some auto formatting:&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/2eab4e1740bde33686b536edf1e87efb/7b9cf/screenshot4.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 59.42583732057417%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAABeUlEQVQoz6VT2XKDMBDjcziM8cHanOk10/7/F6laIJkkkzad6YMGezGyVisK22VkOaELE6q2R2niv1DUVuBkRdfPaP24kx6o2rjt6xvIVvsJRWMTYn5HmFe4YYaXESEQvCCkE9owwHQJLS82/EDPK6mqqe7UbYSGLcv4CXn7giwrfFo2Qh+5lhfYuKBR5SSsSLY/VeUDsF4YVTh8wM8vcHmClYl+ZniSBJ9hve4HOJ9gWLN+QOcyFXNvM2o+y+uW1cMYR7RO+JIedYKGLwzr2p6um7N3R5uVufXtpuWG/sR+hfQTW81w/d6yY10TYLu0kevFpTkG9sC7C6EelDghE9Kf6Nu6tVST7P7j36Z7IWzdQIXTNtWYSZgYH0dVrKs/1RXRswzuhN2AlF/RzxyMZpHtGhKqn+XVzX9FoSpCWkm6sN0TLNdWMoNO/+ip8RyOwj3BcaYIjMKkvx4z54TBzszgsCNoyHvNJMPN+DSMTBvSBnNA10p0VvgNNr135chaX9UAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;Formatted widget code&quot;
        title=&quot;&quot;
        src=&quot;/static/2eab4e1740bde33686b536edf1e87efb/40fad/screenshot4.png&quot;
        srcset=&quot;/static/2eab4e1740bde33686b536edf1e87efb/707e9/screenshot4.png 148w,
/static/2eab4e1740bde33686b536edf1e87efb/649e0/screenshot4.png 295w,
/static/2eab4e1740bde33686b536edf1e87efb/40fad/screenshot4.png 590w,
/static/2eab4e1740bde33686b536edf1e87efb/b3fef/screenshot4.png 885w,
/static/2eab4e1740bde33686b536edf1e87efb/301c0/screenshot4.png 1180w,
/static/2eab4e1740bde33686b536edf1e87efb/b5a53/screenshot4.png 1770w,
/static/2eab4e1740bde33686b536edf1e87efb/7b9cf/screenshot4.png 2090w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;Ok, that looks a bit more approachable. For reference, I’m using the Atom text editor with Atom-beautify for auto formatting.&lt;/p&gt;
&lt;h2&gt;First impressions&lt;/h2&gt;
&lt;p&gt;First thing to note here is the outer function syntax:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; n&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;window&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; document&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This is a &lt;strong&gt;self-executing anonymous function&lt;/strong&gt;. That is, the function is called as soon as it is loaded (“self executing”), it doesn’t have a name or a variable reference (“anonymous”). This is a common approach for plugins and widgets, and was particularly common for jQuery plugins. In my experience, I have seen this mostly using the double bracket pair syntax: &lt;code class=&quot;language-text&quot;&gt;(function(){})()&lt;/code&gt; but this does the same thing.&lt;/p&gt;
&lt;p&gt;The &lt;code class=&quot;language-text&quot;&gt;!&lt;/code&gt; is simply a unary operation (a logical “not”) that forces javascript to execute the function. If the output of the function was stored in a variable, it would be negated, but since the function doesn’t return anything, and the result isn’t stored or used anywhere, it has no effect.&lt;/p&gt;
&lt;p&gt;Next thing to note is that &lt;code class=&quot;language-text&quot;&gt;window&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;document&lt;/code&gt; are passed into the function and will be referenced by &lt;code class=&quot;language-text&quot;&gt;i&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;n&lt;/code&gt; respectively inside the function.&lt;/p&gt;
&lt;p&gt;Let’s find and replace the occurrences of i and n for the sake of clarity…&lt;/p&gt;
&lt;h2&gt;Defaults and the Comma Operator&lt;/h2&gt;
&lt;p&gt;Looking at the internals of the function, we see that the widget starts by assigning stuff to the window, but it does this is a fairly interesting way, first by checking for an existing &lt;code class=&quot;language-text&quot;&gt;window.OT&lt;/code&gt; value using &lt;code class=&quot;language-text&quot;&gt;||&lt;/code&gt; , and if none exists (ie. if &lt;code class=&quot;language-text&quot;&gt;window.OT&lt;/code&gt; is undefined), the code after the &lt;code class=&quot;language-text&quot;&gt;||&lt;/code&gt; is executed.&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/9e0887a4abc6871c5bac50cb6ffde105/10a4e/screenshot5.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 15.793470007593013%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAc0lEQVQI142MSxLCIBAFcxsDEiSEGYKST1nq/W/Uoh7ALPq9TVd3xguSdlZ9IrozyUKKV1yYcWPBDHIcr3S2TRgzVReqrBTduM0vSn6Qyv0b/oj2AOdL/gVPLhJiJWkl5gUnGz6WJii9m7BDwrTv/2Ca9wbcWl5z/4DeHQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;Formatted code detail&quot;
        title=&quot;&quot;
        src=&quot;/static/9e0887a4abc6871c5bac50cb6ffde105/40fad/screenshot5.png&quot;
        srcset=&quot;/static/9e0887a4abc6871c5bac50cb6ffde105/707e9/screenshot5.png 148w,
/static/9e0887a4abc6871c5bac50cb6ffde105/649e0/screenshot5.png 295w,
/static/9e0887a4abc6871c5bac50cb6ffde105/40fad/screenshot5.png 590w,
/static/9e0887a4abc6871c5bac50cb6ffde105/b3fef/screenshot5.png 885w,
/static/9e0887a4abc6871c5bac50cb6ffde105/301c0/screenshot5.png 1180w,
/static/9e0887a4abc6871c5bac50cb6ffde105/10a4e/screenshot5.png 1317w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Why would we bother checking for an existing window.OT value?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;I assume this is to handle a website embedding the code in more than one place. This way we only ever execute the code after the &lt;code class=&quot;language-text&quot;&gt;||&lt;/code&gt; once.&lt;/p&gt;
&lt;p&gt;So, after the &lt;code class=&quot;language-text&quot;&gt;||&lt;/code&gt;…&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/1ef065ec876a4fd5ad36691d3a1fcd53/f98df/screenshot6.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 21.261682242990652%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA0UlEQVQY0y2QXXKEIBAGPU2srFkV5R9EZLOV1+T+h+mM7j581QM19ADd52jwayGZitERrSL3OXIbHf2w0N+UZLnqj+HFflBvrm8urx5JN0wOtQaiL9j4g4/fhPJAx4PZFEb/QLnELFFrvPYm11A2sYbMLDxz9iif6L6UZ1QWLcJx/8XUA3ck7J7Q+WTBt4IJicNlmi1ks7GZRJW1NzvRPrG+McnFursKInRyYGeuf9jaCG3DHxtmS8J8CV3OBJ+pNrNrkRmpRVzlq6KW1wmdDPsHLj6C61j9tIUAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;Further code detail&quot;
        title=&quot;&quot;
        src=&quot;/static/1ef065ec876a4fd5ad36691d3a1fcd53/40fad/screenshot6.png&quot;
        srcset=&quot;/static/1ef065ec876a4fd5ad36691d3a1fcd53/707e9/screenshot6.png 148w,
/static/1ef065ec876a4fd5ad36691d3a1fcd53/649e0/screenshot6.png 295w,
/static/1ef065ec876a4fd5ad36691d3a1fcd53/40fad/screenshot6.png 590w,
/static/1ef065ec876a4fd5ad36691d3a1fcd53/b3fef/screenshot6.png 885w,
/static/1ef065ec876a4fd5ad36691d3a1fcd53/301c0/screenshot6.png 1180w,
/static/1ef065ec876a4fd5ad36691d3a1fcd53/f98df/screenshot6.png 1712w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;&lt;em&gt;Note: I have “folded” each function to highlight the comma operator syntax.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;We see an empty object followed by a comma…weird.&lt;/p&gt;
&lt;p&gt;Usually we would expect a comma to be inside a function declaration, an array or an object, right? In this case, the comma is used as an &lt;strong&gt;operator.&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The comma operator evaluates each of its operands (from left to right) and returns the value of the last operand.&lt;br&gt;
&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Comma_Operator&quot;&gt;MDN&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Based on that description, the empty object is “evaluated” [see note below], then a function is declared and assigned to OT.createNS [note 2], this function is then called a few times.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Note: Why the empty object? If each step is evaluated and only the last value is returned, what use is the empty object?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;By playing around a bit, I have discovered that the empty object is necessary to avoid an error when assigning the &lt;code class=&quot;language-text&quot;&gt;OT.createNS&lt;/code&gt; function right after the &lt;code class=&quot;language-text&quot;&gt;||&lt;/code&gt; operator. Specifically: “Uncaught ReferenceError: Invalid left-hand side in assignment”.&lt;/p&gt;
&lt;h2&gt;The CreateNS function&lt;/h2&gt;
&lt;p&gt;This function gets called a few times, and as far as I can tell, it is simply used to set up the OT object with nested attributes. I think NS might stand for Name Space, but that’s a guess.&lt;/p&gt;
&lt;p&gt;In short, it converts the string “OT.something.else.entirely” to an object.&lt;/p&gt;
&lt;p&gt;It’s fairly straightforward, with the only interesting bit being the use of the &lt;code class=&quot;language-text&quot;&gt;void&lt;/code&gt; operator:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The void operator evaluates the given expression and then returns undefined.&lt;br&gt;
&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/void&quot;&gt;MDN&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;The OT functions&lt;/h2&gt;
&lt;p&gt;The next few lines use the createNS function to ensure the OT object has an attribute of a certain name, and then assigns a function to each of these attributes. The functions are self explanatory:&lt;/p&gt;
&lt;p&gt;createScriptTag, createCssTag, createOcTag, createIFrameTag, loadJQuery&lt;/p&gt;
&lt;h2&gt;The Modal&lt;/h2&gt;
&lt;p&gt;All of this extra work is building up to being able to inject a “modal” into the host page. The modal in question appears when you click the “find a table” button:&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/c08adfb0ae8248ddd124ea411dc05391/6b731/screenshot7.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 56.78048780487806%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB3UlEQVQoz4VSTU8aURT1d/AlCBNkIDAzoAv9Key01FmY7lTYaNi4VNGa+NVoCA22pmpiNI0u3Lgx/gZd6EITP0ARBWbI6b2vmemojb7k5Nx3350z5753OzRNw3tIJpP4qMaJDlVVRcCsKIpgC7yPx+MiZmEnLAFnPcMWjMVikCQJUigEf2eniDkXiUTg8Xjgcrngdrvh9XoF897n84lzS1g4tNrij9PpNPL5PEZGRzGWzSKXyyFLrOs6MpmMwOfBT8gMDEKnWB8aeiFmO2T4/X4Ui0Xwat7cot1o4LFeR6VSgWma+N+6prMUmbEEbYcaJQOBAEqlkih8rlZhtlpoEgzDQIu53YZRe8Tdzy3cbmyjtrmDi+MTqIEglETin0ONL5wSfG+WwyoJNsjhA3GTuP5QQ43cPl1e4XxsAucTk7jM5XH2+wCpVOqVIAVsuysYxHq5DBwe4an4A8bWLozvGzCZ1zfR3t5Dq/wLJrGxuw8Q35+eoaevzxa0W2bB7qiM8eEv2Ftdw+rCAlZm57A0M0MoYKlQ+MuExalpfJv7ivLyChbn58WDvnkUbluhRL8cRX+CZrG3F92yjFA4DOkVOBemUZFpKuRo9IWY7VBluyxKf2NwzHfzHpwD7nzlPyt111TfGR4nAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;Popup modal&quot;
        title=&quot;&quot;
        src=&quot;/static/c08adfb0ae8248ddd124ea411dc05391/40fad/screenshot7.png&quot;
        srcset=&quot;/static/c08adfb0ae8248ddd124ea411dc05391/707e9/screenshot7.png 148w,
/static/c08adfb0ae8248ddd124ea411dc05391/649e0/screenshot7.png 295w,
/static/c08adfb0ae8248ddd124ea411dc05391/40fad/screenshot7.png 590w,
/static/c08adfb0ae8248ddd124ea411dc05391/b3fef/screenshot7.png 885w,
/static/c08adfb0ae8248ddd124ea411dc05391/301c0/screenshot7.png 1180w,
/static/c08adfb0ae8248ddd124ea411dc05391/b5a53/screenshot7.png 1770w,
/static/c08adfb0ae8248ddd124ea411dc05391/6b731/screenshot7.png 2050w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;Modals are a fairly challenging (and controversial!) UI element. They have to sit over everything in your page, position themselves in the center of the screen, and go away when you need them to.&lt;/p&gt;
&lt;p&gt;I try to avoid them if possible, as they also lead to accessibility issues and pose a challenge for screen readers.&lt;/p&gt;
&lt;p&gt;All this leads to complex CSS and JS, which isn’t apparent in the code that we copied…so where is it?&lt;/p&gt;
&lt;p&gt;Going even further down this rabbit hole, we can inspect the modal and discover that the contents actually come from an i-frame. That means the UI and elements are really a completely separate web page, loaded from a different server, simply placed over the host website.&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/3202fed1688619412af66c4902be15a0/fad2e/screenshot8.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 50.511408339889854%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAACH0lEQVQoz2WRWU8TYRSG+wfFYDCWihXiD0CLYNVKC25XqJEqsrSl7VAFiTfGJRAjQZZYIy2LQBDpRkuBAKGdoXWpj2cGChEunnm/b8457/cmx3TeGcDS7Oe4Vgtn7V1UNbqprH/Eqfo2KuofUHnlMadt7VTY3Jxp6qTqWhfVt3qNuRpXENNxI2trCGdwAldwkmb/OA7fKDc8I9i7P3K9ZwSHfwynMmnoxdshY648q/Ofof7SpfsDBMfXUcayKJObBCY2CIqGwtuEPm+hfMoSkrp3ZJW6uy8O05U5YVh75zk90uwZzRyQxivao/P2O0/ah+gQ3H1hau/1HxoeJdTNDg191ElC75slfANRfK9m8Q1O76vOSzkPztDbH6Hr9SK1ktByImFLHxaXIu4BzFK0tig4ng5j7/xAg/s9tvZ3hpaxCU0dwzR0DFEjvXrC8hKNhObLbVRffUiN0ydJpSgpLQ4PZoeXczc9+zg8R2d7N+bGZ1hkwxfkbm1VjBBWV0BUtvw1HGVsfIrwdIzofJzItxiR+QRTc3EhIf8SB5pkZjHJ7GKK+aWU9C0T1Vn4IazwJTInfUuYdnIlVmIqycQO6axGLJU3SKyqBitJXfMk03ky6yrpjSL5wm80TaX05xf8LSEffhYLFAt7mFLrGpGFDWIZldiaxrJuktFIZfOCRnJNMzSxphIX07j0be3usbu5iZrLsVcoUizKI6pKTu7/AFZ1UpVbeaMBAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;Popup modal source&quot;
        title=&quot;&quot;
        src=&quot;/static/3202fed1688619412af66c4902be15a0/40fad/screenshot8.png&quot;
        srcset=&quot;/static/3202fed1688619412af66c4902be15a0/707e9/screenshot8.png 148w,
/static/3202fed1688619412af66c4902be15a0/649e0/screenshot8.png 295w,
/static/3202fed1688619412af66c4902be15a0/40fad/screenshot8.png 590w,
/static/3202fed1688619412af66c4902be15a0/b3fef/screenshot8.png 885w,
/static/3202fed1688619412af66c4902be15a0/301c0/screenshot8.png 1180w,
/static/3202fed1688619412af66c4902be15a0/b5a53/screenshot8.png 1770w,
/static/3202fed1688619412af66c4902be15a0/fad2e/screenshot8.png 2542w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;The code we are vivisecting really only builds the &lt;code class=&quot;language-text&quot;&gt;src&lt;/code&gt; for the iframe, passing in the details of the specific restaurant.&lt;/p&gt;
&lt;p&gt;From here, it is quite straightforward and well beyond the scope of this post. The modal i-frame is a fully functional web application (a react app if the class name “react-root” is to be believed).&lt;/p&gt;
&lt;h2&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;We have seen some interesting patterns here — most of them (the comma operator usage for example) are fairly specific and probably the result of a preprocessor trying to produce a smaller JS. I’m not too sure what, how or why, but hopefully somebody can comment with an explanation.&lt;/p&gt;
&lt;p&gt;The whole thing, however, boils down to a fairly simple approach:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Get the user to copy a &lt;code class=&quot;language-text&quot;&gt;&amp;lt;script&amp;gt;&lt;/code&gt; tag in the host page.&lt;/li&gt;
&lt;li&gt;Use a self executing anonymous function in the &lt;code class=&quot;language-text&quot;&gt;&amp;lt;script&amp;gt;&lt;/code&gt; to…&lt;/li&gt;
&lt;li&gt;Insert an &lt;code class=&quot;language-text&quot;&gt;&amp;lt;i-frame&amp;gt;&lt;/code&gt; tag close to the script tag, and…&lt;/li&gt;
&lt;li&gt;Load your widget from your own server.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Thanks for reading!&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Applications as Configurations.]]></title><description><![CDATA[Here’s a thought: “Most software applications consist of the same basic functions in different configurations”. Let’s play with that…]]></description><link>https://blog.aidanbreen.com//applications-as-configurations/</link><guid isPermaLink="false">https://blog.aidanbreen.com//applications-as-configurations/</guid><pubDate>Wed, 30 Jan 2019 12:00:00 GMT</pubDate><content:encoded>&lt;p&gt;Here’s a thought:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;“Most software applications consist of the same basic functions in different configurations”.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Let’s play with that. Imagine a super-high-level language that could describe a software application tersely, but still capture the usefulness of the application.&lt;/p&gt;
&lt;h2&gt;✏️ Our app&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Example 1&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yaml&quot;&gt;&lt;pre class=&quot;language-yaml&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;&lt;span class=&quot;token key atrule&quot;&gt;App&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Twitter
  Allow user to&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; login
  Allow user to&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; send a tweet
  Allow user to&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; follow another user
  Allow user to&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; view a timeline of tweets&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;https://gist.github.com/aido179/1734bb23182d801f4db3b3e694d54a63&quot;&gt;&lt;em&gt;further examples here&lt;/em&gt;&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Our app needs a name, we’ll use Twitter as an example.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;login&lt;/code&gt; is pretty self explanatory and so common that we can assume it’s baked into the language. &lt;code class=&quot;language-text&quot;&gt;login&lt;/code&gt; becomes &lt;code class=&quot;language-text&quot;&gt;library.login&lt;/code&gt; indicating we will use provided library behaviour and not a custom implementation.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;send a tweet&lt;/code&gt; is a unique instance of a very common action: take some user input (data: text, image, video, audio etc) and store it somewhere (write), so it can be returned (read) later. We can specify all that in more detail later. For now, let’s imagine &lt;code class=&quot;language-text&quot;&gt;send a tweet&lt;/code&gt; just references further configuration somewhere else, and becomes &lt;code class=&quot;language-text&quot;&gt;custom.tweet&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;follow another user&lt;/code&gt; again, a unique name for a common action: make a link, connection or relationship between two things, in this case, users of our app. In the case of twitter, the follower-to-followed relationship is &lt;strong&gt;many-to-one&lt;/strong&gt;. The Facebook friend-to-friend relationship is &lt;strong&gt;one-to-one&lt;/strong&gt;. On reddit, user-to-subreddit subscriptions are &lt;strong&gt;one-to-many&lt;/strong&gt;. &lt;code class=&quot;language-text&quot;&gt;follow another user&lt;/code&gt; becomes &lt;code class=&quot;language-text&quot;&gt;custom.follow&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;view a timeline of tweets&lt;/code&gt; is a read action. It’s going to get some set of things, arrange them somehow and display them to the user. It will probably have nested actions, like liking, retweeting and replying but we’ll handle that later. It becomes &lt;code class=&quot;language-text&quot;&gt;custom.timeline&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Ok, let’s iterate.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Example 2&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yaml&quot;&gt;&lt;pre class=&quot;language-yaml&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;&lt;span class=&quot;token key atrule&quot;&gt;App&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Twitter
  Allow user to&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; library.login
  Allow user to&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; custom.tweet
  Allow user to&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; custom.follow
  Allow user to&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; custom.timeline&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Each &lt;code class=&quot;language-text&quot;&gt;allow user to&lt;/code&gt; line corresponds to a function of the app, but may include multiple UI components. &lt;code class=&quot;language-text&quot;&gt;Library.login&lt;/code&gt; will obviously require a login page, a logout button somewhere else and other elements to update passwords and other information. &lt;code class=&quot;language-text&quot;&gt;custom.follow&lt;/code&gt; might appear in multiple places throughout the app.&lt;/p&gt;
&lt;h2&gt;🌇 Structure and views&lt;/h2&gt;
&lt;p&gt;It probably makes sense then to define the structure of the app separately, but with reference to the previously defined actions.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Example 3&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yaml&quot;&gt;&lt;pre class=&quot;language-yaml&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;&lt;span class=&quot;token key atrule&quot;&gt;App&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Twitter
  &lt;span class=&quot;token key atrule&quot;&gt;Actions&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;#Allow the user do these...&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; library.login
    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; custom.tweet
    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; custom.follow
    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; custom.timeline
  &lt;span class=&quot;token key atrule&quot;&gt;Views&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;# Allow the user to view these&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; library.landingPage
    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; custom.home
    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; custom.profile&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Here I’ve split the app into &lt;code class=&quot;language-text&quot;&gt;Actions&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;Views&lt;/code&gt;. We’ll consider the first view in the list (library.landingPage) to be the default or index. Again, using library means it’s built in. Allowing us to use default boilerplate like this should help speed up development. We can always come back later and use a custom view instead.&lt;/p&gt;
&lt;h2&gt;🔗 Views and Actions&lt;/h2&gt;
&lt;p&gt;Mapping actions to parts of our application structure is not trivial. Some pages will have specific actions, and some actions will be reused in many views. Each view should define exactly the actions it needs.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Example 4&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yaml&quot;&gt;&lt;pre class=&quot;language-yaml&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;&lt;span class=&quot;token key atrule&quot;&gt;App&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Twitter
  &lt;span class=&quot;token key atrule&quot;&gt;Actions&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;#Allow the user do these...&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; library.login
    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; custom.tweet
    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; custom.follow
    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; custom.timeline
  &lt;span class=&quot;token key atrule&quot;&gt;Views&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;# Allow the user to view these&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; library.landingPage
        &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; library.login
    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; custom.home
        &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; library.login.isUserloggedIn
        &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; custom.tweet
        &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; custom.timeline
    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; custom.profile
        &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; library.login.isUserloggedIn
        &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; custom.follow&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Now views have specific actions. We can now have functionality, with the added bonus that is totally clear what happens in each view.&lt;/p&gt;
&lt;p&gt;Notice how &lt;code class=&quot;language-text&quot;&gt;library.login&lt;/code&gt; is used in each view. The &lt;code class=&quot;language-text&quot;&gt;library.login&lt;/code&gt; action is like a package with many nested functions. We should be able to use specific parts of an action like this — where we don’t need to let the user login on each page, but only check that they are logged in.&lt;/p&gt;
&lt;h2&gt;🗣️ Discussion&lt;/h2&gt;
&lt;p&gt;It is conceivable that a configuration like this could be used to generate all the necessary boilerplate for an application. At this point, the application could be generated for any platform too.&lt;/p&gt;
&lt;p&gt;None of this is necessarily new. &lt;a href=&quot;https://www.meteor.com/&quot;&gt;Meteor&lt;/a&gt; provides default app generation, boilerplate login functionality, and client-server comms. &lt;a href=&quot;https://reactjs.org/&quot;&gt;React&lt;/a&gt; has &lt;a href=&quot;https://github.com/facebook/create-react-app&quot;&gt;create-react-app&lt;/a&gt; which…creates a React app for you. The &lt;a href=&quot;https://cli.vuejs.org/guide/creating-a-project.html&quot;&gt;Vue CLI&lt;/a&gt; create command will scaffold your app. In fact, tools like &lt;a href=&quot;https://yeoman.io/&quot;&gt;Yeoman&lt;/a&gt; literally allows you to define a ‘generator’ and spit out a scaffolded application. Further, &lt;a href=&quot;https://facebook.github.io/react-native/&quot;&gt;React Native&lt;/a&gt; takes a JavaScript project (basically a highly featured configuration) and generates native applications, similar to &lt;a href=&quot;https://cordova.apache.org/&quot;&gt;Cordova&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Code generation is not new. So what’s different here?&lt;/p&gt;
&lt;p&gt;In the case of Yeoman, &lt;em&gt;create-react-app&lt;/em&gt; and the VUE &lt;em&gt;create&lt;/em&gt; command, once the scaffolding is generated, it’s all up to you. You are left with standard application code and development continues as normal. What I propose here is a tight coupling where the &lt;strong&gt;configuration becomes the application&lt;/strong&gt;, not just a blueprint. That is, if you change the configuration at any time, the code will be updated to reflect that change. Write code that conflicts with the configuration, you get errors.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;A developer should be able to look at the configuration and know that the application strictly conforms to that definition.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;In the case of Meteor, with it’s highly functional login boilerplate and client-server comms (pub/sub), (which I think is wonderful, by the way) this goes a step further. User authentication and login is not a convenient package that happens to work quite well — it should be baked in to the very core of the system. With Meteor, the developer still needs to write templates that show/hide content or routes based on the users logged in state. This is silly. At best, it is inconvenient and leads to template overhead. At worst, it is a security risk when, though accident or inexperience, a developer does not handle authentication correctly.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;It should be impossible to create insecure apps!&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;When a view is defined like this:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yaml&quot;&gt;&lt;pre class=&quot;language-yaml&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;token key atrule&quot;&gt;Views&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; custom.home
        &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; library.login.isUserloggedIn
        &lt;span class=&quot;token punctuation&quot;&gt;...&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;There should be nothing else to do. If the user isn’t properly authenticated, it isn’t accessible. That’s it. No fiddling with client side routers, entry events, or app-wide templates or anything else. The config is God. The config wins.&lt;/p&gt;
&lt;p&gt;Finally, (for now) there are massive benefits when it comes to deployment and maintenance. Deterministic configurations should provide reliable deployments, and make dependency management easy. Imagine an app you built 5 years ago using library.login: you should be able to trust that a new deployment will include up-to-date authentication code — because your app will be generated using the standard configuration, it is always backwards compatible. Even if massive high level changes need to be made, as long as you use &lt;code class=&quot;language-text&quot;&gt;library.login.isUserloggedIn&lt;/code&gt;, your view will be protected on a higher level by the generated app code.&lt;/p&gt;
&lt;h2&gt;🎬 Conclusion&lt;/h2&gt;
&lt;p&gt;I know I am being incredibly idealistic here. I’m certain that there are edge cases and complications that make this completely impractical for some purposes. But this isn’t supposed to be a panacea. It’s supposed to work for the 90% of applications that need to make CRUD operations protected by user authentication.&lt;/p&gt;
&lt;p&gt;But it’s fun to dream.&lt;/p&gt;</content:encoded></item></channel></rss>