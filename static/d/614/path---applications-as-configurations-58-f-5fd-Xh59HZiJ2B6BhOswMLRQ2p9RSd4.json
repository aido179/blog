{"data":{"site":{"siteMetadata":{"title":"A Tech Blog","author":"Aidan Breen"}},"markdownRemark":{"id":"ead9c6be-565d-5924-a9f2-6abfdb800016","excerpt":"Here‚Äôs a thought: ‚ÄúMost software applications consist of the same basic functions in different configurations‚Äù. Let‚Äôs play with that. Imagine a super-high-level‚Ä¶","html":"<p>Here‚Äôs a thought:</p>\n<blockquote>\n<p>‚ÄúMost software applications consist of the same basic functions in different configurations‚Äù.</p>\n</blockquote>\n<p>Let‚Äôs play with that. Imagine a super-high-level language that could describe a software application tersely, but still capture the usefulness of the application.</p>\n<h2>‚úèÔ∏è Our app</h2>\n<p><strong>Example 1</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">App</span><span class=\"token punctuation\">:</span> Twitter\n  Allow user to<span class=\"token punctuation\">:</span> login\n  Allow user to<span class=\"token punctuation\">:</span> send a tweet\n  Allow user to<span class=\"token punctuation\">:</span> follow another user\n  Allow user to<span class=\"token punctuation\">:</span> view a timeline of tweets</code></pre></div>\n<p><a href=\"https://gist.github.com/aido179/1734bb23182d801f4db3b3e694d54a63\"><em>further examples here</em></a></p>\n<ul>\n<li>Our app needs a name, we‚Äôll use Twitter as an example.</li>\n<li><code class=\"language-text\">login</code> is pretty self explanatory and so common that we can assume it‚Äôs baked into the language. <code class=\"language-text\">login</code> becomes <code class=\"language-text\">library.login</code> indicating we will use provided library behaviour and not a custom implementation.</li>\n<li><code class=\"language-text\">send a tweet</code> is a unique instance of a very common action: take some user input (data: text, image, video, audio etc) and store it somewhere (write), so it can be returned (read) later. We can specify all that in more detail later. For now, let‚Äôs imagine <code class=\"language-text\">send a tweet</code> just references further configuration somewhere else, and becomes <code class=\"language-text\">custom.tweet</code></li>\n<li><code class=\"language-text\">follow another user</code> again, a unique name for a common action: make a link, connection or relationship between two things, in this case, users of our app. In the case of twitter, the follower-to-followed relationship is <strong>many-to-one</strong>. The Facebook friend-to-friend relationship is <strong>one-to-one</strong>. On reddit, user-to-subreddit subscriptions are <strong>one-to-many</strong>. <code class=\"language-text\">follow another user</code> becomes <code class=\"language-text\">custom.follow</code></li>\n<li><code class=\"language-text\">view a timeline of tweets</code> is a read action. It‚Äôs going to get some set of things, arrange them somehow and display them to the user. It will probably have nested actions, like liking, retweeting and replying but we‚Äôll handle that later. It becomes <code class=\"language-text\">custom.timeline</code></li>\n</ul>\n<p>Ok, let‚Äôs iterate.</p>\n<p><strong>Example 2</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">App</span><span class=\"token punctuation\">:</span> Twitter\n  Allow user to<span class=\"token punctuation\">:</span> library.login\n  Allow user to<span class=\"token punctuation\">:</span> custom.tweet\n  Allow user to<span class=\"token punctuation\">:</span> custom.follow\n  Allow user to<span class=\"token punctuation\">:</span> custom.timeline</code></pre></div>\n<p>Each <code class=\"language-text\">allow user to</code> line corresponds to a function of the app, but may include multiple UI components. <code class=\"language-text\">Library.login</code> will obviously require a login page, a logout button somewhere else and other elements to update passwords and other information. <code class=\"language-text\">custom.follow</code> might appear in multiple places throughout the app.</p>\n<h2>üåá Structure and views</h2>\n<p>It probably makes sense then to define the structure of the app separately, but with reference to the previously defined actions.</p>\n<p><strong>Example 3</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">App</span><span class=\"token punctuation\">:</span> Twitter\n  <span class=\"token key atrule\">Actions</span><span class=\"token punctuation\">:</span>\n    <span class=\"token comment\">#Allow the user do these...</span>\n    <span class=\"token punctuation\">-</span> library.login\n    <span class=\"token punctuation\">-</span> custom.tweet\n    <span class=\"token punctuation\">-</span> custom.follow\n    <span class=\"token punctuation\">-</span> custom.timeline\n  <span class=\"token key atrule\">Views</span><span class=\"token punctuation\">:</span>\n    <span class=\"token comment\"># Allow the user to view these</span>\n    <span class=\"token punctuation\">-</span> library.landingPage\n    <span class=\"token punctuation\">-</span> custom.home\n    <span class=\"token punctuation\">-</span> custom.profile</code></pre></div>\n<p>Here I‚Äôve split the app into <code class=\"language-text\">Actions</code> and <code class=\"language-text\">Views</code>. We‚Äôll consider the first view in the list (library.landingPage) to be the default or index. Again, using library means it‚Äôs built in. Allowing us to use default boilerplate like this should help speed up development. We can always come back later and use a custom view instead.</p>\n<h2>üîó Views and Actions</h2>\n<p>Mapping actions to parts of our application structure is not trivial. Some pages will have specific actions, and some actions will be reused in many views. Each view should define exactly the actions it needs.</p>\n<p><strong>Example 4</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">App</span><span class=\"token punctuation\">:</span> Twitter\n  <span class=\"token key atrule\">Actions</span><span class=\"token punctuation\">:</span>\n    <span class=\"token comment\">#Allow the user do these...</span>\n    <span class=\"token punctuation\">-</span> library.login\n    <span class=\"token punctuation\">-</span> custom.tweet\n    <span class=\"token punctuation\">-</span> custom.follow\n    <span class=\"token punctuation\">-</span> custom.timeline\n  <span class=\"token key atrule\">Views</span><span class=\"token punctuation\">:</span>\n    <span class=\"token comment\"># Allow the user to view these</span>\n    <span class=\"token punctuation\">-</span> library.landingPage\n        <span class=\"token punctuation\">-</span> library.login\n    <span class=\"token punctuation\">-</span> custom.home\n        <span class=\"token punctuation\">-</span> library.login.isUserloggedIn\n        <span class=\"token punctuation\">-</span> custom.tweet\n        <span class=\"token punctuation\">-</span> custom.timeline\n    <span class=\"token punctuation\">-</span> custom.profile\n        <span class=\"token punctuation\">-</span> library.login.isUserloggedIn\n        <span class=\"token punctuation\">-</span> custom.follow</code></pre></div>\n<p>Now views have specific actions. We can now have functionality, with the added bonus that is totally clear what happens in each view.</p>\n<p>Notice how <code class=\"language-text\">library.login</code> is used in each view. The <code class=\"language-text\">library.login</code> action is like a package with many nested functions. We should be able to use specific parts of an action like this‚Ää‚Äî‚Ääwhere we don‚Äôt need to let the user login on each page, but only check that they are logged in.</p>\n<h2>üó£Ô∏è Discussion</h2>\n<p>It is conceivable that a configuration like this could be used to generate all the necessary boilerplate for an application. At this point, the application could be generated for any platform too.</p>\n<p>None of this is necessarily new. <a href=\"https://www.meteor.com/\">Meteor</a> provides default app generation, boilerplate login functionality, and client-server comms. <a href=\"https://reactjs.org/\">React</a> has <a href=\"https://github.com/facebook/create-react-app\">create-react-app</a> which‚Ä¶creates a React app for you. The <a href=\"https://cli.vuejs.org/guide/creating-a-project.html\">Vue CLI</a> create command will scaffold your app. In fact, tools like <a href=\"https://yeoman.io/\">Yeoman</a> literally allows you to define a ‚Äògenerator‚Äô and spit out a scaffolded application. Further, <a href=\"https://facebook.github.io/react-native/\">React Native</a> takes a JavaScript project (basically a highly featured configuration) and generates native applications, similar to <a href=\"https://cordova.apache.org/\">Cordova</a>.</p>\n<p>Code generation is not new. So what‚Äôs different here?</p>\n<p>In the case of Yeoman, <em>create-react-app</em> and the VUE <em>create</em> command, once the scaffolding is generated, it‚Äôs all up to you. You are left with standard application code and development continues as normal. What I propose here is a tight coupling where the <strong>configuration becomes the application</strong>, not just a blueprint. That is, if you change the configuration at any time, the code will be updated to reflect that change. Write code that conflicts with the configuration, you get errors.</p>\n<p><strong>A developer should be able to look at the configuration and know that the application strictly conforms to that definition.</strong></p>\n<p>In the case of Meteor, with it‚Äôs highly functional login boilerplate and client-server comms (pub/sub), (which I think is wonderful, by the way) this goes a step further. User authentication and login is not a convenient package that happens to work quite well‚Ää‚Äî‚Ääit should be baked in to the very core of the system. With Meteor, the developer still needs to write templates that show/hide content or routes based on the users logged in state. This is silly. At best, it is inconvenient and leads to template overhead. At worst, it is a security risk when, though accident or inexperience, a developer does not handle authentication correctly.</p>\n<p><strong>It should be impossible to create insecure apps!</strong></p>\n<p>When a view is defined like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token punctuation\">...</span>\n<span class=\"token key atrule\">Views</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> custom.home\n        <span class=\"token punctuation\">-</span> library.login.isUserloggedIn\n        <span class=\"token punctuation\">...</span></code></pre></div>\n<p>There should be nothing else to do. If the user isn‚Äôt properly authenticated, it isn‚Äôt accessible. That‚Äôs it. No fiddling with client side routers, entry events, or app-wide templates or anything else. The config is God. The config wins.</p>\n<p>Finally, (for now) there are massive benefits when it comes to deployment and maintenance. Deterministic configurations should provide reliable deployments, and make dependency management easy. Imagine an app you built 5 years ago using library.login: you should be able to trust that a new deployment will include up-to-date authentication code‚Ää‚Äî‚Ääbecause your app will be generated using the standard configuration, it is always backwards compatible. Even if massive high level changes need to be made, as long as you use <code class=\"language-text\">library.login.isUserloggedIn</code>, your view will be protected on a higher level by the generated app code.</p>\n<h2>üé¨ Conclusion</h2>\n<p>I know I am being incredibly idealistic here. I‚Äôm certain that there are edge cases and complications that make this completely impractical for some purposes. But this isn‚Äôt supposed to be a panacea. It‚Äôs supposed to work for the 90% of applications that need to make CRUD operations protected by user authentication.</p>\n<p>But it‚Äôs fun to dream.</p>","frontmatter":{"title":"Applications as Configurations.","date":"January 30, 2019"}}},"pageContext":{"slug":"/applications-as-configurations/","previous":{"fields":{"slug":"/mapping-out-my-side-projects/"},"frontmatter":{"title":"Mapping out my side projects"}},"next":null}}