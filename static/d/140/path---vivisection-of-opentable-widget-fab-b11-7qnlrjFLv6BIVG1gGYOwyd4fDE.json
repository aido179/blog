{"data":{"site":{"siteMetadata":{"title":"A Tech Blog","author":"Aidan Breen"}},"markdownRemark":{"id":"d90dff3c-343a-5ea4-a167-da33a6231239","excerpt":"You may be familiar with OpenTable, a service built around restaurant bookings. One of their main features is an embeddable widget that restaurants can insert…","html":"<p>You may be familiar with OpenTable, a service built around restaurant bookings. One of their main features is an embeddable widget that restaurants can insert in their website to let patrons reserve a table. Here’s what it looks like in the wild:</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d4493fc8415fa3782f9b4f6b862c9631/3a642/screenshot1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 54.60937500000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABZklEQVQoz31Sy3KCQBDkw3NKTrnllD/yomKS0lhRPCAaKQkKIvIS7WxPsWQllWxV184MO73TvViXywXj8Ri9Xg95noOLtev12oJ5XdctzuezEddswGqXwXFdWEmSYDKZCIIg+JPQBInMXB1CmFZw15+wyrIEURQFsiwTAnN18+63qqqknyva72FRpgalLJdLzOdzLBYLuEoC8+l0itls1uaMHceBv9lIHwch8Xa7hcXJNCGleJ6H4XAI27bFW+YkHwwGUnsZjWTv9/tyse7nMLRMJtTFOI5BT7UEesOD4lMj0TSAVVOdTKgJC7UHquD7PtI0xfF4RBTF8u10Oil/IvCag/0K7+4B6/tHbJ6eUSipedYhzBvCw2qNXRiKH9obPb3Eqp59hTi8TZCM35F83Er+IeSU3FUTG9upm8M3MV9VTSpQFvySXJZF29CF6e9NzEs1mlr7ynwIemT+PlqiSfLfpeYrfwMsc0teW41GqwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"OpenTable widget on http://thehillpub.ie/\"\n        title=\"\"\n        src=\"/static/d4493fc8415fa3782f9b4f6b862c9631/40fad/screenshot1.png\"\n        srcset=\"/static/d4493fc8415fa3782f9b4f6b862c9631/707e9/screenshot1.png 148w,\n/static/d4493fc8415fa3782f9b4f6b862c9631/649e0/screenshot1.png 295w,\n/static/d4493fc8415fa3782f9b4f6b862c9631/40fad/screenshot1.png 590w,\n/static/d4493fc8415fa3782f9b4f6b862c9631/b3fef/screenshot1.png 885w,\n/static/d4493fc8415fa3782f9b4f6b862c9631/301c0/screenshot1.png 1180w,\n/static/d4493fc8415fa3782f9b4f6b862c9631/b5a53/screenshot1.png 1770w,\n/static/d4493fc8415fa3782f9b4f6b862c9631/3a642/screenshot1.png 2560w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>This widget was generated by the OpenTable widget builder page like so:</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3902295d05ad6ccc25b62c3abb8c1cd4/0dba9/screenshot2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 50.47095761381476%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAABVElEQVQoz4WT3U7DMAyF9/5Pg4QQCAESL4DEI6xsS/PTNE6attsuDna6jA0EXJzadeovjp2uxnGE9x4hBEzTVJRSKrGcc3mXb+rapUr8eER4e0f3+ILc91hJ0DlXkud5Lh+J74yBP8VjjGWTH5L4MIB2CmHdYGS/AKU6SZoYOMvubL1YAJmtrBPRr4oMiswRVgGq7RZKqbJjlgoDwT48IT6/Im53IEmQRF6/0ilWoKwzULcttNbLjilipIju5g7m9h6Jj0NDKgl/VsngApz4sWkaNCyBGu5dygPS4YDIDY/s00Ul/wJH6REHZKoDH22/35dBkPS19u4fWNVS4ekKCESA4oslCkuPaBnYwFP9rjrtegvOPaw68DHl6sii1gattdgZB9N1cD0Pqg9sv+R5eDHQNbBe0KpaoWoNNgxtdMdQiw9tsW4tv7PaxVe2g7fu/GNI/ickM/scW/T2JgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"screenshot2\"\n        title=\"\"\n        src=\"/static/3902295d05ad6ccc25b62c3abb8c1cd4/40fad/screenshot2.png\"\n        srcset=\"/static/3902295d05ad6ccc25b62c3abb8c1cd4/707e9/screenshot2.png 148w,\n/static/3902295d05ad6ccc25b62c3abb8c1cd4/649e0/screenshot2.png 295w,\n/static/3902295d05ad6ccc25b62c3abb8c1cd4/40fad/screenshot2.png 590w,\n/static/3902295d05ad6ccc25b62c3abb8c1cd4/b3fef/screenshot2.png 885w,\n/static/3902295d05ad6ccc25b62c3abb8c1cd4/301c0/screenshot2.png 1180w,\n/static/3902295d05ad6ccc25b62c3abb8c1cd4/b5a53/screenshot2.png 1770w,\n/static/3902295d05ad6ccc25b62c3abb8c1cd4/0dba9/screenshot2.png 2548w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>Try it yourself at: <a href=\"https://www.opentable.com/widget/reservation/preview?rid=412810&#x26;language=en-US&#x26;domainId=1&#x26;countryCode=US\">opentable</a></p>\n<p>As you can see, we can change a few settings and then just copy the code into our own website. Pretty handy, but how does it work?</p>\n<h2>The loading script</h2>\n<p>The script we copy is simply a <code class=\"language-text\">&lt;script/&gt;</code> tag, which is used to load javascript. We can simply copy the URL into a browser window to see the code that would be loaded:</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c3011ff821afad0c9f36fe90d630fb75/53c0a/screenshot3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 37.842064112587956%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABHElEQVQoz22R2Y6DMAxF8/8f2H2jhbCEHcTw0t7JySgVDxPpyHZirhfMMI6yRaGycqpcLZsXgaIsQxzhHVzTqK1rDd72Q6eyaeW6ObzVzslcr1clj4eyLAtYm339qqrkfBLUXiTGjRdzPsZvvT9No36WRRxzOByUJIkul4seXjhNUz2fzwA+wvGO99frpbZt1XWd+r7Xuq5f3u+3zPF41O120/l8DhZx7Pbufr8HKEq8LYSlY4pQwJAEp9NJjA/4UQgfS4zPRBQCvkOQbhFc/NiGJB53u53oFvb7ffiYERnVWhugI2CX7JTO5nn2O5yCBUPlv59hVfo/m+d5iLHbUYBOhmEIxD2Sgzgxwubz+Qj+O/FtC4uH7V3M5fwCo21Vfol5iZ8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Raw widget code\"\n        title=\"\"\n        src=\"/static/c3011ff821afad0c9f36fe90d630fb75/40fad/screenshot3.png\"\n        srcset=\"/static/c3011ff821afad0c9f36fe90d630fb75/707e9/screenshot3.png 148w,\n/static/c3011ff821afad0c9f36fe90d630fb75/649e0/screenshot3.png 295w,\n/static/c3011ff821afad0c9f36fe90d630fb75/40fad/screenshot3.png 590w,\n/static/c3011ff821afad0c9f36fe90d630fb75/b3fef/screenshot3.png 885w,\n/static/c3011ff821afad0c9f36fe90d630fb75/301c0/screenshot3.png 1180w,\n/static/c3011ff821afad0c9f36fe90d630fb75/b5a53/screenshot3.png 1770w,\n/static/c3011ff821afad0c9f36fe90d630fb75/53c0a/screenshot3.png 2558w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>Yikes. It’s obviously been minified (as you would expect) but hope is not lost. Let’s copy this into a text editor and run some auto formatting:</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2eab4e1740bde33686b536edf1e87efb/7b9cf/screenshot4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 59.42583732057417%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAABeUlEQVQoz6VT2XKDMBDjcziM8cHanOk10/7/F6laIJkkkzad6YMGezGyVisK22VkOaELE6q2R2niv1DUVuBkRdfPaP24kx6o2rjt6xvIVvsJRWMTYn5HmFe4YYaXESEQvCCkE9owwHQJLS82/EDPK6mqqe7UbYSGLcv4CXn7giwrfFo2Qh+5lhfYuKBR5SSsSLY/VeUDsF4YVTh8wM8vcHmClYl+ZniSBJ9hve4HOJ9gWLN+QOcyFXNvM2o+y+uW1cMYR7RO+JIedYKGLwzr2p6um7N3R5uVufXtpuWG/sR+hfQTW81w/d6yY10TYLu0kevFpTkG9sC7C6EelDghE9Kf6Nu6tVST7P7j36Z7IWzdQIXTNtWYSZgYH0dVrKs/1RXRswzuhN2AlF/RzxyMZpHtGhKqn+XVzX9FoSpCWkm6sN0TLNdWMoNO/+ip8RyOwj3BcaYIjMKkvx4z54TBzszgsCNoyHvNJMPN+DSMTBvSBnNA10p0VvgNNr135chaX9UAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Formatted widget code\"\n        title=\"\"\n        src=\"/static/2eab4e1740bde33686b536edf1e87efb/40fad/screenshot4.png\"\n        srcset=\"/static/2eab4e1740bde33686b536edf1e87efb/707e9/screenshot4.png 148w,\n/static/2eab4e1740bde33686b536edf1e87efb/649e0/screenshot4.png 295w,\n/static/2eab4e1740bde33686b536edf1e87efb/40fad/screenshot4.png 590w,\n/static/2eab4e1740bde33686b536edf1e87efb/b3fef/screenshot4.png 885w,\n/static/2eab4e1740bde33686b536edf1e87efb/301c0/screenshot4.png 1180w,\n/static/2eab4e1740bde33686b536edf1e87efb/b5a53/screenshot4.png 1770w,\n/static/2eab4e1740bde33686b536edf1e87efb/7b9cf/screenshot4.png 2090w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>Ok, that looks a bit more approachable. For reference, I’m using the Atom text editor with Atom-beautify for auto formatting.</p>\n<h2>First impressions</h2>\n<p>First thing to note here is the outer function syntax:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token operator\">!</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">,</span> n<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">(</span>window<span class=\"token punctuation\">,</span> document<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>","frontmatter":{"title":"Vivisection of OpenTable widget.","date":"February 06, 2019"}}},"pageContext":{"slug":"/vivisection-of-opentable-widget/","previous":{"fields":{"slug":"/hi-folks/"},"frontmatter":{"title":"New Beginnings"}},"next":null}}